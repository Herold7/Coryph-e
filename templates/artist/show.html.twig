{% extends 'base.html.twig' %}

{% block title %}Artistes{% endblock %}

{% block body %}
<style>
    main {
        background: rgb(254,254,243);
        background: -moz-linear-gradient(138deg, rgba(254,254,243,1) 25%, rgba(207,204,194,1) 50%, rgba(28,33,41,1) 75%);
        background: -webkit-linear-gradient(138deg, rgba(254,254,243,1) 25%, rgba(207,204,194,1) 50%, rgba(28,33,41,1) 75%);
        background: linear-gradient(138deg, rgba(254,254,243,1) 25%, rgba(207,204,194,1) 50%, rgba(28,33,41,1) 75%);
        filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#fefef3",endColorstr="#1c2129",GradientType=1);
    }
</style>

<main class="p-5 mb-5 bg-light">
    <div class="container ">
            <h1 class="display-1 text-center mb-5">{{ artist.nickname }}</h1>
            <div class="row mb-3 justify-content-center">
                <div class="col-lg-6">
                    <img src="{{ asset('/uploads/artists/') }}{{ artist.image }}" 
                    alt="{{ artist.nickname }}" class="img-fluid rounded shadow-lg" 
                    style="width: 50%;">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                {% if artist.category is defined %}
                    <div class="d-flex gap-2 align-items-center mb-3">
                        <div>
                    <p class="fs-3">{{ artist.category.name}}</p>
                        </div>
                    </div>
                {% endif %}
            <div class="mb-5">
                <p class="fs-3">Biographie</p>
                <p class="fs-5">{{ artist.bio }}</p>
            </div>
            <div class="mb-5">
                <p class="fs-3">Ville</p>
                <p class="fs-5">{{ artist.city }}</p>
            </div>
            <div class="mb-5">
                <p class="fs-3">Pays</p>
                <p class="fs-5">{{ artist.country }}</p>
            </div>
            <div class="mb-5">
                <p class="fs-3">Année d'existence</p>
                <p class="fs-5">{{ artist.birthyear }}</p>
            </div>
            <div class="mb-5">
                <p class="fs-3">Nombre de membres</p>
                <p class="fs-5">{{ artist.number }}</p>
            </div>
            <div class="mb-5">
                <p class="fs-3">Status</p>
                <p class="fs-5">{{ artist.professional ? 'Oui' : 'Non' }}</p>
            </div>
            </div>
                    <div class="col-md-6">
                <!-- Instruments -->
                <div class="row mb-5">
                    <div class="col-md-8 border-end">
                    <p class="fs-3">Instruments</p>
                    {% if artist.instrument is defined %}
                        {% for instrument in artist.instrument %}
                        <p class="fs-5">• {{ instrument.name|capitalize }}</p>
                        {% endfor %}
                    {% else %}
                        <p class="fs-5">No instruments found.</p>
                    {% endif %}
                    </div>
                </div>

                <!-- Styles musicaux -->
                <div class="row mb-5">
                    <div class="col-md-8 border-end">
                    <p class="fs-3">Style musical</p>
                    {% if artist.musicalStyle is defined %}
                        {% for style in artist.musicalStyle %}
                        <p class="fs-5">• {{ style.name|capitalize }}</p>
                        {% endfor %}
                    {% else %}
                        <p class="fs-5">No musical styles found.</p>
                    {% endif %}
                    </div>
                </div>

                <!-- Types de prestations -->
                <div class="row mb-5">
                    <div class="col-md-8 border-end">
                    <p class="fs-3">Type de prestation</p>
                    {% if artist.performance is defined %}
                        {% for performance in artist.performance %}
                        <p class="fs-5">• {{ performance.type|capitalize }}</p>
                        {% endfor %}
                    {% else %}
                        <p class="fs-5">No performances found.</p>
                    {% endif %}
                    </div>
                </div>

                <!-- Types de prestations -->
                <div class="row mb-5">
                    <div class="col-md-8 border-end">
                    <p class="fs-3">Type d'ensemble</p>
                    {% if artist.ensemble is defined %}
                        {% for ensemble in artist.ensemble %}
                        <p class="fs-5">• {{ ensemble.name|capitalize }}</p>
                        {% endfor %}
                    {% else %}
                        <p class="fs-5">No performances found.</p>
                    {% endif %}
                    </div>
                </div>
        </div>
        </div>
        <!-- Informations supplémentaires pour les utilisateurs connectés -->
        {% if is_granted('ROLE_USER') %}
            <div class="mb-5">
                <p class="fs-3">Email de l'artiste</p>
                <p class="fs-5">{{ artist.mail }}</p>
            </div>
            <div class="mb-5">
                <p class="fs-3">Téléphone de l'artiste</p>
                <p class="fs-5">{{ artist.phone }}</p>
            </div>
            <div class="mb-5">
                <p class="fs-3">Réseaux Sociaux</p>
                {% for socialNetwork in artist.socialNetwork %}
                    <p class="fs-5">• {{ socialNetwork.name }}</p>
                {% endfor %}
            </div>
            <div class="mb-5">
                <p class="fs-3">Website</p>
                {% for website in artist.websites %}
                    <p class="fs-5">• <a href="{{ website.url }}">{{ website.url }}</a></p>
                {% endfor %}
            </div>
        {% endif %}

        {# Commented out price block until it is available #}
        {# <div class="col-md-4">
            <p class="fs-3">Price</p>
            <p class="fs-5">{{ artist.price }} €</p>
            <p class="fs-6">par nuit</p>
        </div> #}
        </div>

    <div class="row">
            <div class="col"><a href="{{ path('app_artist_index') }}" 
            class="btn btn-primary">Retour à la liste des artistes</a></div>
            {% if is_granted('ROLE_MUSICIAN') %}
                <div class="col"><a href="{{ path('app_artist_edit', {'id': artist.id}) }}" 
                class="btn btn-success">Modifier</a></div>
                <div class="col">{{ include('artist/_delete.html.twig') }}</div> 
            {% endif %}
        </div>
    </div>
</main>
{% endblock %}